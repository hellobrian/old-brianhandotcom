---
import HomeMenuWrapper from "./HomeMenuWrapper.astro";
import HomeLink from "./HomeLink.astro";
import NavBarButton from "./NavBarButton.astro";
---

<header id="header" data-is-scrolling-up="false" data-is-near-top="true">
  <HomeMenuWrapper>
    <HomeLink variant={"header"} />
    <NavBarButton variant="menu">menu</NavBarButton>
  </HomeMenuWrapper>
</header>

<style>
  header {
    position: sticky;
    top: 0;
    z-index: 2;
    padding: var(--space-l-xl) var(--space-s);
    transition: background-color ease 200ms;
    pointer-events: none;
    background-color: var(--local-background-color);
  }
</style>

<script>
  const header = document.getElementById("header") as HTMLElement;

  const changeHeaderBgColor = () => {
    const currentScrollPos = window.pageYOffset;
    const isNearTop = currentScrollPos < 150;

    header.style.setProperty(
      "--local-background-color",
      isNearTop === true ? "var(--black)" : "transparent"
    );
  };

  window.addEventListener("scroll", changeHeaderBgColor);
</script>
