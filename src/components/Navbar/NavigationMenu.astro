---
import NavBarButton from "./NavBarButton.astro";
---

<dialog id="dialog">
  <nav>
    <NavBarButton variant="close">close</NavBarButton>

    <ul>
      <li><a href="/blog">blog</a></li>
      <li><a href="/uses">uses</a></li>
    </ul>
  </nav>
</dialog>

<style>
  @keyframes slidein {
    from {
      transform: translateY(-100%);
    }

    to {
      transform: translateY(0%);
    }
  }

  dialog {
    animation: slidein 100ms ease-out;
    margin: auto;
    padding: 0;
    border: 4px solid var(--black);
    background-color: var(--white);
    border-radius: 14px;
  }

  dialog::backdrop {
    background-color: rgba(255, 255, 227, 0.5);
  }

  dialog[open] {
    animation-duration: 200ms;
    animation-name: slidein;
  }

  nav {
    padding: var(--space-l-xl) var(--space-s);
    display: flex;
    align-items: center;
    flex-direction: column;
    gap: var(--space-s);
    min-width: 300px;
  }

  button {
    color: var(--black);
    font-family: var(--tanker);
    border: 1px solid var(--gray);
    font-size: var(--step-3);
    padding: 0 var(--space-s);
    transition: border ease 200ms;
    cursor: pointer;
  }

  button:hover {
    background-color: var(--black);
    color: var(--white);
  }

  ul {
    list-style-type: none;
    padding: 0;
    margin: 0;
    display: grid;
    grid-template-columns: 1fr;
    gap: var(--space-s);
    margin: var(--space-xl) 0;
    padding: 0 var(--space-s);
  }

  li {
    padding: 0;
    marrgin: 0;
    width: 100%;
  }

  li > a {
    color: var(--black);
    font-family: var(--tanker);
    font-weight: 400;
    font-size: var(--step-1);
    display: inline-block;
    padding: var(--space-s) 0;
    text-decoration-color: var(--black);
    text-underline-offset: 4px;
    text-decoration-color: var(--very-muted);
    background: var(--black);
    color: var(--white);
    text-align: center;
    padding: var(--space-s);
    width: 200px;
    border-radius: 14px;
  }

  /* li > a:is(:hover, :focus) {
    text-decoration-color: var(--accent);
    background: var(--black);
    color: var(--white);
  } */
</style>

<script>
  const menuButton = document.querySelector(
    "[data-variant='menu']"
  ) as HTMLElement;
  const closeButton = document.querySelector(
    "[data-variant='close']"
  ) as HTMLElement;
  const body = document.querySelector("body") as HTMLElement;
  const dialog = document.getElementById("dialog") as HTMLDialogElement;

  const handleMenuClick = () => {
    body.style.overflowY = "hidden";
    dialog.showModal();
  };

  const handleCloseClick = () => {
    body.style.overflowY = "initial";
    dialog.close();
  };

  menuButton.addEventListener("click", handleMenuClick);
  closeButton.addEventListener("click", handleCloseClick);
  dialog.addEventListener("click", (e) => {
    if (e.target === dialog) {
      body.style.overflowY = "initial";
      dialog.close();
    }
  });
</script>
